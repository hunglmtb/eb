<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.1.0.final using JasperReports Library version 6.1.0  -->
<!-- 2015-08-09T23:41:38 -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Dayly_volumes" pageWidth="1260" pageHeight="595" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="1220" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="efed499b-aa64-445b-9155-b1c8afeb30d5">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MySQL addapter"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<parameter name="date" class="java.util.Date"/>
	<parameter name="facility_id" class="java.lang.Integer"/>
	<queryString language="SQL">
		<![CDATA[select a.flow_id,a.flow_phase phase,a.flow_name,a.fl_vol_uom,a.fl_day_grs_vol, a.fl_day_net_vol,null meas,null sw,
x.MONTH_GRS_VOL mtdGrsVol,x.MONTH_NET_VOL mtdNetVol,
ROUND(case when x.MONTH_DAY_COUNT=0 then null else x.MONTH_GRS_VOL/x.MONTH_DAY_COUNT end,3) MGrsRage,
ROUND(case when x.MONTH_DAY_COUNT=0 then null else x.MONTH_NET_VOL/x.MONTH_DAY_COUNT end,3) MNetRage,
y.YEAR_GRS_VOL ytdGrsVol,y.YEAR_NET_VOL ytdNetVol,
ROUND(case when y.YEAR_DAY_COUNT=0 then null else y.YEAR_GRS_VOL/y.YEAR_DAY_COUNT end,3) YGrsRate,
ROUND(case when y.YEAR_DAY_COUNT=0 then null else y.YEAR_NET_VOL/y.YEAR_DAY_COUNT end,3) YNetRate
from
(SELECT a.flow_id,b.phase_id,c.name flow_phase, b.name flow_name, (
SELECT CODE
FROM CODE_VOL_UOM
WHERE ID = ( 
CASE b.PHASE_ID
WHEN 1 
THEN u.OIL_VOLUME_UOM
WHEN 2 
THEN u.GAS_VOLUME_UOM
END )
)fl_vol_uom, NULL meas, NULL sw, a.fl_day_grs_vol, a.fl_day_net_vol

FROM flow_day_value a, flow b, code_flow_phase c, facility f
LEFT JOIN standard_uom u ON f.id = u.facility_id
WHERE a.flow_id = b.id
AND b.phase_id = c.id
AND occur_date =  $P{date}
AND b.facility_id = f.id
AND b.facility_id = $P{facility_id}
) a left join (
    SELECT a.flow_id,SUM(a.FL_DAY_GRS_VOL) MONTH_GRS_VOL,sum(a.FL_DAY_NET_VOL) MONTH_NET_VOL,count(*) MONTH_DAY_COUNT FROM flow_day_value a join flow b on a.flow_id=b.id and b.facility_id=$P{facility_id} WHERE (occur_date between DATE_FORMAT($P{date} ,'%Y-%m-01') AND $P{date})
 group by flow_id) x on a.flow_id=x.flow_id
left join (
    SELECT a.flow_id,SUM(a.FL_DAY_GRS_VOL) YEAR_GRS_VOL,sum(a.FL_DAY_NET_VOL) YEAR_NET_VOL,count(*) YEAR_DAY_COUNT FROM flow_day_value a join flow b on a.flow_id=b.id and b.facility_id=$P{facility_id} WHERE (occur_date between DATE_FORMAT($P{date} ,'%Y-01-01') AND $P{date})
 group by flow_id) y on a.flow_id=y.flow_id
 group by a.phase_id,a.flow_name
]]>
	</queryString>
	<field name="phase" class="java.lang.String"/>
	<field name="fl_vol_uom" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="meas" class="java.lang.Object"/>
	<field name="sw" class="java.lang.Object">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fl_day_grs_vol" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fl_day_net_vol" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="MGrsRage" class="java.math.BigDecimal"/>
	<field name="MNetRage" class="java.math.BigDecimal"/>
	<field name="mtdGrsVol" class="java.math.BigDecimal"/>
	<field name="mtdNetVol" class="java.math.BigDecimal"/>
	<field name="YGrsRate" class="java.math.BigDecimal"/>
	<field name="YNetRate" class="java.math.BigDecimal"/>
	<field name="ytdGrsVol" class="java.math.BigDecimal"/>
	<field name="ytdNetVol" class="java.math.BigDecimal"/>
	<field name="flow_name" class="java.lang.String"/>
	<group name="Group1">
		<groupExpression><![CDATA[$F{phase}]]></groupExpression>
		<groupHeader>
			<band height="21">
				<textField>
					<reportElement x="0" y="1" width="150" height="20" uuid="93238bee-5afe-4fc4-802b-8ca4309383eb"/>
					<textFieldExpression><![CDATA[$F{phase}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="5">
				<line>
					<reportElement positionType="FixRelativeToBottom" x="-1" y="-4" width="1203" height="1" uuid="cde99169-7bc1-47a2-9aa1-eacc7b9d5f92"/>
					<graphicElement>
						<pen lineStyle="Dotted" lineColor="#9C7B7B"/>
					</graphicElement>
				</line>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="55" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="30" width="250" height="20" uuid="f46c2150-c32e-4960-8019-e8bfad4a04b6"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Daily Volume]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="45" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="20" width="150" height="20" uuid="0a1ee84d-3342-423e-a183-19da736f7db5"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Flow Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="320" y="20" width="70" height="20" uuid="4cbd72ec-b7c3-4bd3-b832-1ab68a8a9168"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[UOM]]></text>
			</staticText>
			<staticText>
				<reportElement x="390" y="20" width="80" height="20" uuid="a4296134-6903-4d7f-81ee-b9d3a6cdcc58"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Grs Vol]]></text>
			</staticText>
			<staticText>
				<reportElement x="470" y="20" width="80" height="20" uuid="e78c5573-b043-44c8-b267-28986dfdda66"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Net Vol]]></text>
			</staticText>
			<staticText>
				<reportElement x="550" y="20" width="80" height="20" uuid="c14a4ef6-a285-4c13-9af2-89938d3bc6f2"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Grs Rate]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="40" width="1202" height="1" uuid="37257a67-c826-401c-b900-eaa3242ada75"/>
			</line>
			<staticText>
				<reportElement x="630" y="20" width="80" height="20" uuid="93377627-4a62-45cb-97a0-15c1802b2987"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Net Rate]]></text>
			</staticText>
			<line>
				<reportElement x="550" y="16" width="160" height="1" uuid="f7db40cd-1eaf-4565-9dfd-960ac07a9e88"/>
			</line>
			<staticText>
				<reportElement x="609" y="0" width="50" height="20" uuid="6e97617d-f9ee-4344-b434-cc26782997e7"/>
				<textElement textAlignment="Left">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[MTD Avg]]></text>
			</staticText>
			<staticText>
				<reportElement x="712" y="20" width="80" height="20" uuid="4d62594a-aeee-46ba-b369-a68206e0f744"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Grs Vol]]></text>
			</staticText>
			<staticText>
				<reportElement x="792" y="20" width="80" height="20" uuid="434687dc-8b33-42e0-9895-69b05c657c40"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Net Vol]]></text>
			</staticText>
			<line>
				<reportElement x="712" y="16" width="160" height="1" uuid="bec79946-9820-403d-b316-341516b3562f"/>
			</line>
			<staticText>
				<reportElement x="781" y="0" width="80" height="20" uuid="b142aee6-1662-4da0-9eca-974f1cb7b210"/>
				<textElement textAlignment="Left">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[MTD]]></text>
			</staticText>
			<staticText>
				<reportElement x="880" y="20" width="80" height="20" uuid="788210b8-4b4f-4f9f-a543-1f7a9012d9ce"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Grs Rate]]></text>
			</staticText>
			<staticText>
				<reportElement x="960" y="20" width="80" height="20" uuid="16f899cc-f03a-4ebf-8240-45140c7ec8bd"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Net Rate]]></text>
			</staticText>
			<staticText>
				<reportElement x="1122" y="20" width="80" height="20" uuid="84f17096-0417-4f98-b8a1-693d5a42b718"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Net Vol]]></text>
			</staticText>
			<staticText>
				<reportElement x="1112" y="0" width="80" height="20" uuid="63f38025-342b-4f10-a29a-e1bffbe42fd2"/>
				<textElement textAlignment="Left">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[YTD]]></text>
			</staticText>
			<line>
				<reportElement x="1042" y="16" width="160" height="1" uuid="e324d5eb-f6a1-474c-867b-d2b9fcc405ae"/>
			</line>
			<staticText>
				<reportElement x="1042" y="20" width="80" height="20" uuid="4a79861c-2869-44fd-96ee-8454159de670"/>
				<textElement textAlignment="Center">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Grs Vol]]></text>
			</staticText>
			<staticText>
				<reportElement x="934" y="0" width="80" height="20" uuid="3b24193c-de65-4ded-8d1c-c4e565b50ccc"/>
				<textElement textAlignment="Left">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[YTD Avg]]></text>
			</staticText>
			<line>
				<reportElement x="880" y="16" width="160" height="1" uuid="8faecd7b-16d5-4ea7-ab04-c9a7c54c4fbc"/>
			</line>
		</band>
	</columnHeader>
	<detail>
		<band height="25" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="320" y="3" width="70" height="16" uuid="276ccb30-ebbe-48f2-aa1c-e2adcecb1f53"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{fl_vol_uom}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="390" y="3" width="80" height="16" uuid="28f75055-e2d5-4f32-9b3d-4fd9bf437aad"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{fl_day_grs_vol}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="470" y="3" width="80" height="16" uuid="487f67bc-07d1-41bd-ac9f-4c984f8fd151"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{fl_day_net_vol}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="550" y="3" width="80" height="16" uuid="ae2a9448-7553-4e7a-874e-dd9e203d8127"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{MGrsRage}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="40" y="3" width="280" height="16" uuid="8432cdf7-06bc-4dc4-9eb4-3d03c3db6976"/>
				<textFieldExpression><![CDATA[$F{flow_name}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="630" y="3" width="80" height="16" uuid="cd5af8d7-b276-4b7f-9c01-41e74d5a0f06"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{MNetRage}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="712" y="3" width="80" height="16" uuid="5dda0ee8-529f-444e-8032-34b0bbb4dc32"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{mtdGrsVol}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="792" y="3" width="80" height="16" uuid="9e706460-5624-4a3c-8f8a-97bcb9f95604"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{mtdNetVol}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="880" y="3" width="80" height="16" uuid="d527abcf-0235-4c10-a620-9c4318d0deb7"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{YGrsRate}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="960" y="3" width="80" height="16" uuid="a4bac498-f0b3-45f6-a75a-4720e8db1f6c"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{YNetRate}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="1042" y="3" width="80" height="16" uuid="95e79a33-4950-4519-b9cf-3c8d84ee8e25"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{ytdGrsVol}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="1122" y="3" width="80" height="16" uuid="5287a4d0-ac06-442b-9722-de241ba07b74"/>
				<textElement textAlignment="Center"/>
				<textFieldExpression><![CDATA[$F{ytdNetVol}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="9" splitType="Stretch"/>
	</summary>
</jasperReport>
